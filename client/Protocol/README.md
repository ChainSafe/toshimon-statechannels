# Toshimon Protocol

The `Protocol` classlib is the primary building block for a C# based Toshimon client implementation.
It contains all the data structures used by the protocol and methods to serialize these in the expected format. 
It also contains services to make calling the on-chain contract infrastructure very straightforward.

For an example client using `Protocol` please see [`ConsoleClient`](../ConsoleClient/README.md)

## Code Generation

Parts of the lib were made using the Nethereum code generation functionality. This should not need to be redone unless the contract interfaces change.

If regeneration of the contract interfaces is required the code generation can be done with the following steps:

0. Ensure Dotnet Code 2.1 is installed. This is not required by the project but is required to do the code generation (https://docs.nethereum.com/en/latest/nethereum.autogen.contractapi/)
1. From the `on-chain` directory in the root of this repo, run `yarn hardhat build` to produce the ABI files
2. Set the `<NethereumGenerateCode>` field in the `.csproj` file to true
3. Build the project with `dotnet build`

This will overwrite the `Autogen` directory. It is likely this will break things by duplicating some class names. To fix this delete any autogenerated file in the `ContractDefinition` directories that isn't the `<ContractName>Definition.cs` file.

## License

- This is a private prototype and not currently under a public license

## Contributors

- [Willem Olding (ChainSafe)](github.com/willemolding/)
